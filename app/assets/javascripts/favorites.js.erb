$( document ).ready(function() {

  $( document ).ajaxComplete(function() {

    $(".star").click(function(event) {
      event.preventDefault();

      var gemName = $(this).prev().text();
      var gemLink = $(this).prev().attr("href");

      if (localStorage[gemName] === undefined) {
        $(this).attr("src", "<%= asset_url('star-blue.png') %>");
        localStorage[gemName] = gemLink;
      }
      else {
        $(this).attr("src", "<%= asset_url('star-gray.png') %>");
        localStorage.removeItem(gemName);
      }
    });

  });

});
